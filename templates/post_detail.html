{% extends "base.html" %}
{% block blog %}active{% endblock %}
{% load static %}
{% block content %}
{% load crispy_forms_tags %}

<div class="container-fluid mt-5 mb-4">
    <div class="row g-0 text-center">
        <!-- <h1> category here </h1> -->
    </div>
    <div class="row g-0 text-center">
        <h2>{{ post.title }}</h2>
    </div>
    
    <div class="row g-0 mb-3 text-center">
        <p style="font-size: 0.8em;">{{ post.author }} | {{ post.created_on }} | {{ post.likes }}  | {{ post.comment_count }} | <a href="{% url 'update_post' post.slug %}">(Update)</a></p>
    </div>
    <div class="welcome-box">
    <div class="row g-0 mb-3">
        <img src="https://res.cloudinary.com/doh67artq/image/upload/v1677884179/static/carousel-image/person-back2_fyzq4e.jpg" style="width:100%; height:100%;">
    </div>
    <div class="row g-0">
        <div class="col-md-7 p-5 text-center">
        <p>{{ post.content | safe }} </p> 
        </div>
        <div class="col-md-5 p-5">
            <img src="https://res.cloudinary.com/doh67artq/image/upload/v1677884179/static/carousel-image/person-back2_fyzq4e.jpg" style="width:350px; height:350px">
        </div>
        <div class="row g-0">
            <h1 class="text-center">Comments</h1>
        </div>
        {% for comment in comments %}
        <div class="row g-0">
            {{ comment.name }} | {{ comment.created_on }} {{ comment.body | linebreaks }}
        </div>
        {% endfor %}
        {% if commented %}
        <div class="alert alert-success" role="alert">
            Your comment is awaiting for approval
        </div>
        {% else %}
        <div class="row g-0">
            {% if user.is_authenticated %}

            <h3>Leave a comment:</h3>
            <p>Posting as: {{ user.username }}</p>
            <form method="post" style="width: 50%;" class="text-center mx-auto">
                {{ comment_form | crispy }}
                {% csrf_token %}
                <button type="submit" class="btn">Submit</button>
            </form>
            {% endif %}
            {% endif %}
        </div>
    </div>
    </div>
</div>

{% endblock %}